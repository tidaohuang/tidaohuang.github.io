<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_51) on Thu Nov 21 01:56:53 IST 2019 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>wt.fc.collections (WNC.HORSE.10.00.602)</title>
<meta name="date" content="2019-11-21">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="wt.fc.collections (WNC.HORSE.10.00.602)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../wt/fc/batch/package-summary.html">Prev&nbsp;Package</a></li>
<li><a href="../../../wt/fc/delete/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?wt/fc/collections/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 title="Package" class="title">Package&nbsp;wt.fc.collections</h1>
<div class="docSummary">
<div class="block">Provides Windchill-specific Collection objects, and a collection-based refresh API.</div>
</div>
<p>See:&nbsp;<a href="#package.description">Description</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Interface Summary table, listing interfaces, and an explanation">
<caption><span>Interface Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../wt/fc/collections/CollectionsManager.html" title="interface in wt.fc.collections">CollectionsManager</a></td>
<td class="colLast">
<div class="block">A remote interface for managing <code>WTCollection</code>s.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../wt/fc/collections/ReferenceBased.html" title="interface in wt.fc.collections">ReferenceBased</a></td>
<td class="colLast">
<div class="block">Used by the default implementations of WTCollection to connect to other
 WTCollections.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../wt/fc/collections/WTCollection.html" title="interface in wt.fc.collections">WTCollection</a></td>
<td class="colLast">
<div class="block">A <code>Collection</code> that provides QueryKey, WTReference, and Persistable-based
 views of its data.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../wt/fc/collections/WTKeyedMap.html" title="interface in wt.fc.collections">WTKeyedMap</a></td>
<td class="colLast">
<div class="block">A Map in which the keys are a WTSet.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../wt/fc/collections/WTList.html" title="interface in wt.fc.collections">WTList</a></td>
<td class="colLast">
<div class="block">A WTCollection that implements the java.util.List interface.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../wt/fc/collections/WTSet.html" title="interface in wt.fc.collections">WTSet</a></td>
<td class="colLast">
<div class="block">Refines the contract of WTCollection to require that all the objects
 in the implementing collection are unique.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../wt/fc/collections/WTValuedMap.html" title="interface in wt.fc.collections">WTValuedMap</a></td>
<td class="colLast">
<div class="block">A WTKeyedMap in which the values are a WTCollection.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Class Summary table, listing classes, and an explanation">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../wt/fc/collections/CollectionsHelper.html" title="class in wt.fc.collections">CollectionsHelper</a></td>
<td class="colLast">
<div class="block">Provides utility methods for dealing with <code>WTCollection</code>s.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../wt/fc/collections/RefreshSpec.html" title="class in wt.fc.collections">RefreshSpec</a></td>
<td class="colLast">
<div class="block">Encapsulates the parameters that can be passed to the CollectionsManager
 refresh APIs.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../wt/fc/collections/WTArrayList.html" title="class in wt.fc.collections">WTArrayList</a></td>
<td class="colLast">
<div class="block">An array-based implementation of WTArrayList</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../wt/fc/collections/WTHashSet.html" title="class in wt.fc.collections">WTHashSet</a></td>
<td class="colLast">
<div class="block">A hash-based implementation of WTSet.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../wt/fc/collections/WTKeyedHashMap.html" title="class in wt.fc.collections">WTKeyedHashMap</a></td>
<td class="colLast">
<div class="block">Follows the patterns established by the default collection implementations.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../wt/fc/collections/WTValuedHashMap.html" title="class in wt.fc.collections">WTValuedHashMap</a></td>
<td class="colLast">
<div class="block">The key mask for the values collection can be specified in the constructor.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Exception Summary table, listing exceptions, and an explanation">
<caption><span>Exception Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Exception</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../wt/fc/collections/CollectionContainsDeletedException.html" title="class in wt.fc.collections">CollectionContainsDeletedException</a></td>
<td class="colLast">
<div class="block"><BR><BR><B>Supported API: </B>true
 <BR><BR><B>Extendable: </B>false</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../wt/fc/collections/CollectionContainsStaleException.html" title="class in wt.fc.collections">CollectionContainsStaleException</a></td>
<td class="colLast">
<div class="block"><BR><BR><B>Supported API: </B>true
 <BR><BR><B>Extendable: </B>false</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package.description">
<!--   -->
</a>
<h2 title="Package wt.fc.collections Description">Package wt.fc.collections Description</h2>
<div class="block">Provides Windchill-specific Collection objects, and a collection-based refresh API.

<h2>Package Specification</h2>

The collections package is an extension of the <a href="http://java.sun.com/docs/books/tutorial/collections/">Java Collections framework</a>. It contains the following core interfaces:

<ul>
<li><code>WTCollection</code>
<li><code>WTList</code>
<li><code>WTSet</code>
<li><code>WTKeyedMap</code>
<li><code>WTValuedMap</code>
</ul>

And the following basic implementation classes:

<ul>
<li><code>WTArrayList</code>
<li><code>WTHashSet</code>
<li><code>WTKeyedHashMap</code>
<li><code>WTValuedHashMap</code>
<li><code>CollectionsHelper</code>
</ul>

In addition, the package provides a collections based <code>refresh</code> API.

<h3>Usage examples</h3>

The following commented code demonstrates the basic functionality of the collections package

<pre>
      WTPart part1 = null;
      ObjectIdentifier part2_oid = null;
      WTDocument doc1 = null;
      ObjectIdentifier doc2_oid = null;
      
      WTCollection c1 = new WTArrayList();
      c1.add(part1);
      c1.add(part2_oid);
      c1.add(doc1);
      c1.add(doc2_oid);
      
      // Returns an Iterator of ObjectReferences. Does not inflate
      // part1_oid and doc2_oid
      Iterator i = c1.referenceIterator();
      
      // Returns an Iterator of ObjectIdentifiers
      i = c1.queryKeyIterator();
      
      // Returns an Iterator of Persistables. Performs a batch
      // inflate of part1_oid and doc2_oid
      try {
         i = c1.persistableIterator();
      }
      catch (WTException wte) {
         // Operations that may need to inflate a collection
         // throw WTExceptions
      }
            
      // Get a subcollection of the parts in c1
      WTCollection sub = c1.subCollection(WTPart.class);      
      assert sub.contains(part1);
      assert !sub.contains(doc1);           
      
      // Modifications to sub are reflected in the parent collection
      sub.remove(part1);
      assert !c1.contains(part1);
      
      //And vice versa
      c1.remove(part2_oid);
      assert !sub.contains(part2_oid);
      
      // Create a collection with a non-default key type
      // With just VERSION_FOREIGN_KEY enabled, the collection
      // can only contain Iterated objects, and will store them
      // by VersionForeignKey as opposed to by ObjectIdentifier
      WTCollection c2 = new WTArrayList(CollectionsHelper.VERSION_FOREIGN_KEY);
      c2.addAll(c1);
      
      // Returns an Iterator of VersionReferences
      i = c2.referenceIterator();
      
      // Returns an Iterator of VersionForeignKeys
      i = c2.queryKeyIterator();
      
      // Throws a ClassCastException because WTPartMaster is not Iterated
      c2.add(part1.getMaster());
      
      // Create a collection that supports both Iterated and non-Iterated
      // objects
      WTCollection c3 = new WTArrayList(CollectionsHelper.VERSION_FOREIGN_KEY | CollectionsHelper.OBJECT_IDENTIFIER);
      // Add an iterated object; will use its VersionForeignKey when needed
      c3.add(part1);
      
      // Throws ClassCastException, because collection only supports VersionForeignKey objects for Iterated objects
      c3.add(part2_oid);
      
      // OK, since WTPartMaster isn't iterated
      c3.add(part1.getMaster());
      
      // Returns an Iterator with a VersionReference for part1, 
      // and an ObjectReference for part1's master
      i = c3.referenceIterator();
      
      // Returns an Iterator with a VersionForeignKey for part1, 
      // and an ObjectIdentifier for part1's master
      i = c3.queryKeyIterator();
      
      // Create a map with Persistable keys and arbitrary values
      WTKeyedMap m1 = new WTKeyedHashMap();
      
      Object foo = new Object();
      Object bar = new Object();
      m1.put(part1, foo);
      m1.put(doc1, bar);
      
      // Get a WTSet of the keys in m1
      WTSet s = m1.wtKeySet();
      
      // Get a collection of the values in m1
      Collection v = m1.values();
      
      // Get a set of the Map.Entry objects in m1
      // For WTKeyedMaps, the objects will implement WTKeyedMap.WTEntry, and extension of Map.Entry.
      Set entries = m1.entrySet();
      
      // Iterate through the entry set
      for (Iterator j = entries.iterator(); j.hasNext();) {
         WTEntry e = (WTEntry)j.next();
         // You can get the key as a Persistable, WTReference, or QueryKey
         Persistable p = e.getKeyAsPersistable();
         Object o = e.getValue();
         // You can change the value
         e.setValue(new Object());
      }
      
      // A WTValuedMap is an extension of WTKeyedMap in which the values
      // must be Persistables, QueryKeys, or WTReferences, just like the keys
      WTValuedMap m2 = new WTValuedHashMap();
      
      // Throws a ClassCastException because the value is just an Object
      m2.put(part1, foo);
      
      m2.put(part1, doc1);
      m2.put(part2_oid, doc2_oid);
      
      // The values returned by a WTValuedMap implements WTCollection
      WTCollection v2 = m2.wtValues();
      
      // For WTValuedMaps, the objects will implmeent WTValuedMap.WTValuedEntry, 
      // an extension of WTKeyedMap.WTEntry
      entries = m2.entrySet();
      
      // Iterate through the entry set
      for (Iterator j = entries.iterator(); j.hasNext();) {
         WTValuedEntry e = (WTValuedEntry)j.next();
         // You can get the key as a Persistable, WTReference, or QueryKey
         Persistable key = e.getKeyAsPersistable();
         
         // You can get the value as a Persistable, WTReference, or QueryKey
         Persistable value = e.getValueAsPersistable();         
      }      
</pre>

<h3>Design Goals</h3>

The collections package was designed with a few key use cases in mind: event dispatch, version-based APIs, persistence layer APIs, and performance.
<p>
<b>Event dispatch</b><p>
Multi-object events will carry one or more of these collections with them. To be effective in event listeners, the collection should:
<ul>
<li>Be fast to iterate through
<li>Be able to quickly answer whether or not it contains objects of a given type
<li>Support mappings of data for cases where a structure of information is required
</ul>

<b>Version-based service APIs</b><p>
In the context of a given transaction, passing around version references is rarely needed. Version references are an effective way to represent longer term relationships, but typically, once an API is called then an object reference to the latest iteration is what the code actually needs. Since we have client APIs and database relationships that are version based, however, we need a way to represent a collection of these versions. Thus the collection should:
<ul>
<li>Support version references and branch ids
<li>Be able to refresh references to the latest iteration
</ul>

<b>Persistence layer APIs</b><p>
The persistence layer often deals with ObjectIdentifiers or just arrays of longs and classnames, rather than with Persistables or even with references. The collection should:
<ul>
<li>Support adding objects as oids. 
<li>Lazily convert the oids to references or Persistables as necessary
</ul>

<b>Performance</b><p>
The collection implementations should facilitate batch operations while adding as little overhead as possible themselves. The collection should:
<ul>
<li>Be able to be refreshed as a whole
<li>Minimize internal object creation
</ul></div>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../wt/fc/batch/package-summary.html">Prev&nbsp;Package</a></li>
<li><a href="../../../wt/fc/delete/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?wt/fc/collections/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
